<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Never-Ending Snail Breeding Project</title>
<link
  rel="icon"
  href="https://cdn.glitch.global/9c426ba7-e6c6-43e1-b286-a8b271859b77/Snail%20Favicon.png?v=1750973734782"
  type="image/x-icon"
/>

<!-- Fonts (fixed malformed duplicate) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">

<style>
:root {
  --timer: #0066ff;
  --accent: #ff7f00;
  --font-base: "Rubik", Arial, sans-serif;
  --font-timer: "Roboto", monospace;
}
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
html,
body {
  height: 100%;
  overflow: hidden;
}
body {
  font-family: var(--font-base);
  line-height: 1.6;
  color: #1b1b1b;
  background: url("https://cdn.glitch.global/9c426ba7-e6c6-43e1-b286-a8b271859b77/MacBook%20Pro%2016_%20-%204.jpg?v=1750881277001")
    center/cover fixed no-repeat;
  display: flex;
  justify-content: center;
  min-height: 100vh;
}

/* Make page auto-grow but at least fill the viewport */
.page {
  width: clamp(320px, 90vw, 900px);
  min-height: 100vh;
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(4px);
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.25);
  padding: 2rem;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  position: relative; /* ensure landing can absolute-position itself */
}

/* --- Main content --- */
#main {
  flex: 1; /* allow scrolling */
  flex-direction: column;
}

.header-img {
  max-width: 300px;
  max-height: 109px;
  object-fit: cover;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  margin-bottom: 2rem;
  loading: lazy;
}

#timer {
  font-family: var(--font-timer);
  font-size: 1rem;
  font-weight: 500;
  letter-spacing: 1px;
  color: var(--timer);
  margin-bottom: 1.75rem;
}

nav {
  font-size: 1.35rem;
  font-weight: 500;
  display: flex;
  gap: 4rem;
  margin-bottom: 1rem;
}
nav a {
  color: #108010;
  text-decoration: none;
  position: relative;
}
nav a::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -5px;
  width: 100%;
  height: 5px;
  border-radius: 4px;
  background: var(--accent);
  opacity: 0;
  transition: opacity 0.3s;
  mix-blend-mode: destination-out; /* punch through */
}
nav a:hover::after,
nav a.active::after {
  opacity: 1;
}

h3 {
  margin: 1.75rem 0 0.25rem;
  font-weight: 500;
}
p { margin-bottom: 0.75rem; }
.date {
  font-size: 0.85rem;
  color: #555;
  margin-top: 1rem;
  margin-bottom: 1rem;
  display: block;
}

/* Uniform section top padding */
section {
  display: none;
  animation: fade 0.3s forwards;
  padding-top: 1.75rem;
}
section.active {
  display: block;
  padding-bottom: 3rem;
}
/* remove extra margin on the first heading in notes */
section#notes h3:first-of-type { margin-top: 0; }

/* home message */
#welcome,
#home .welcome {
  font-size: 2rem;
  line-height: 1.4;
  margin-bottom: 2.5rem;
  color: #1b1b1b;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  justify-content: center;
}

/* --- Hero (splash + badge) — global --- */
.hero {
  position: relative;
  display: inline-block;
  margin: 0 auto;
  text-align: center;
}
.hero .splash {
  max-width: 100%;
  height: auto;
  display: block;
}
.hero .badge {
  position: absolute;
  bottom: 0;
  left: 0;       /* bottom-left as requested */
  width: 30%;
  max-width: 180px;
}

/* --- Gallery as a grid, left→right ordering --- */
.gallery {
  column-width: 175px;
  column-gap: 1rem;
}
.gallery img {
  display: inline-block;
  width: 100%;
  height: auto;
  margin-bottom: 1rem;
  break-inside: avoid;
  border-radius: 4px;
}
#support img.product-card{
  width:100%;
  max-width:360px;
  aspect-ratio: 3 / 4;
  max-width:342px;
  border-radius:8px;
  height:auto;
}

@keyframes fade { from {opacity:0;} to {opacity:1;} }

/* Mobile text-size tweaks */
@media (max-width: 600px) {
  body { font-size: 0.875rem; }
  nav { font-size: 1.1rem; gap: 2rem; }
  #timer { font-size: 0.875rem; }
  #landing .landing-text {
    font-size: 1.25rem;
    line-height: 1.2;
    white-space: nowrap;
    overflow-wrap: normal;
  }
  .gallery { column-width: 80px; }
  .gallery img { border-radius: 2px; }
  #support { padding-bottom: 2.5rem; }
}
</style>
</head>
<body>
<div class="page">
  <!-- Your real site -->
  <div id="main">
    <img
      class="header-img"
      src="https://cdn.glitch.global/9c426ba7-e6c6-43e1-b286-a8b271859b77/Screenshot%202025-06-21%20at%201.56.54%E2%80%AFPM%201.png?v=1750882151549"
      alt="Clock Snail Bonsai Ionizing Radiation on Carrot"
    />

    <div id="timer">Loading…</div>

    <nav>
      <a href="#notes" data-target="notes">Notes</a>
      <a href="#gallery" data-target="gallery">Gallery</a>
      <a href="#support" data-target="support">Support</a>
    </nav>

    <!-- HOME: splash + badge only here -->
    <section id="home" class="active">
      <div class="hero">
        <img class="splash" src="assets/splash.png" alt="Splash">
        <img class="badge"  src="assets/badge.png"  alt="Celebrating over 6 years badge">
      </div>
    </section>

    <!-- NOTES (unchanged content) -->
    <section id="notes">
      <article>
        <!-- … your Notes content exactly as before … -->
        <!-- Keeping full text from your message -->
        <h3>Notes on the Never-Ending Snail Breeding Project</h3>
        <p>
          This reflection examines the first six years of a lifelong
          practice caring for and breeding common garden snails,
          <em>Cornu aspersum</em>…
        </p>
        <!-- (retain all the paragraphs you pasted; omitted here for brevity) -->
        <span class="date">Updated · Jul&nbsp;17&nbsp;2025</span>
      </article>
    </section>

    <!-- GALLERY (unchanged) -->
    <section id="gallery">
      <div class="gallery">
        <!-- all your <img> items exactly as before -->
      </div>
      <!-- Support marker comment left as-is -->
    </section>

    <!-- SUPPORT (unchanged) -->
    <section id="support">
      <h3 style="margin-top: 0">Snail Defecation Trading Card (Sleeved)</h3>
      <img
        src="https://cdn.glitch.global/9c426ba7-e6c6-43e1-b286-a8b271859b77/snail-landscape.png?v=1751232416767"
        alt="Snail-defecation trading card in sleeve"
        style="max-width:100%;height:auto;border-radius:8px;margin:0.75rem 0 1.25rem;"
      />
      <p>
        For <strong>$40</strong> you’ll receive a one-of-a-kind
        snail-defecation trading card in a clear archival sleeve…
      </p>
      <a
        href="https://ko-fi.com/s/48176b8cd3"
        target="_blank" rel="noopener"
        style="display:inline-block;background:var(--accent);color:#fff;font-weight:600;padding:0.75rem 1.5rem;border-radius:0.5rem;text-decoration:none;font-size:1rem;"
      >Get a card</a>
      <noscript>
        <p>JavaScript disabled? Buy it
          <a href="https://ko-fi.com/s/48176b8cd3">directly on Ko-fi</a>.
        </p>
      </noscript>
    </section>
    <!-- end of #support -->
  </div>
</div>

<script>
/* -----------------------------------------------------------
  Never-Ending Snail Breeding Project — main script
  (2025-06-30 rewrite: no landing page, hash-based routing)
  ----------------------------------------------------------- */
(() => {
  "use strict";

  /* ——— Prevent automatic scroll restoration ——— */
  if ("scrollRestoration" in history) {
    history.scrollRestoration = "manual";
  }

  /* ——— Helpers ——— */
  const page = document.querySelector(".page");
  function syncPageHeight() {
    page.style.height = window.innerHeight + "px";
  }

  /* ——— Breeding-timer ——— */
  const startedAt = new Date("2019-06-17T00:32:00-04:00");
  const timerEl = document.getElementById("timer");

  function updateTimer() {
    const diff = Date.now() - startedAt;
    const yrs = Math.floor(diff / 31536000000);
    let days = Math.floor((diff % 31536000000) / 86400000);
    const mos = Math.floor(days / 30);
    days %= 30;
    const h = Math.floor((diff % 86400000) / 3600000);
    const m = Math.floor((diff % 3600000) / 60000);
    const s = Math.floor((diff % 60000) / 1000);
    const ms = diff % 1000;
    timerEl.textContent = `${yrs}y ${mos}m ${days}d ${h}h ${m}m ${s}s ${String(ms).padStart(3, "0")}ms`;
  }

  /* ——— Simple hash-router ——— */
  const sections = Array.from(document.querySelectorAll("section"));
  const links = Array.from(document.querySelectorAll("nav a"));
  const validIds = ["home", "notes", "gallery", "support"];

  function showSection() {
    const id = validIds.includes(location.hash.slice(1))
      ? location.hash.slice(1)
      : "home";

    sections.forEach((sec) => sec.classList.toggle("active", sec.id === id));
    links.forEach((a) => a.classList.toggle("active", a.getAttribute("href") === "#" + id));
    page.scrollTop = 0;
  }

  /* ——— Boot ——— */
  window.addEventListener("DOMContentLoaded", () => {
    syncPageHeight();
    showSection();
    updateTimer();
    setInterval(updateTimer, 1); // keep your original cadence
  });
  window.addEventListener('load', () => {
    requestAnimationFrame(() => {
      requestAnimationFrame(() => { page.scrollTop = 0; });
    });
  });

  window.addEventListener("hashchange", showSection);
  window.addEventListener("resize",   syncPageHeight);
  window.addEventListener("load",     syncPageHeight);
  window.addEventListener("pageshow", syncPageHeight);
})();
</script>
</body>
</html>
